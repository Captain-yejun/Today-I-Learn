## HTTPS : Hypertext Transfer Protocol Secure

- HTTP에 보안성을 추가하고자 TLS(SSL)를 이용하여 웹서버와 웹브라우저간 안전하게 데이터를 송수신한다. 
<br>

**등장 배경**
- HTTP의 경우 클라이언트와 서버의 통신 과정 중 발생하는 패킷 블록에 대한 암호화가 되어 있지 않아
외부에서 탈취를 할 가능성이 높아진다.

- 사이트가 민감 정보를 다루는 곳이라면 이를 방지하기 위한 보안 정책을 수립하기 위해 필수적인 요소이다.
<br>

**SSL과 TLS란?**
- 웹 표준 암호화 통신으로 웹서버와 웹브라우저 사이에 모든 정보를 암호화 해주는 방식이다.

- 네스케이프에 의해 발명되었지만 표준화 기구인 IETF로 관리가 변경되면서 TLS로 이름이 변경되었으며,
TLS가 SSL를 계승하였기에 SSL은 더 이상 사용하지 않고 있다. (요즘날에 SSL을 사용한다는 것은 TLS를 쓴다는 것과 같다.)
<br>

**💡 TLS의 보안**
- 암호화 : 대칭키, 공개키
  - 대칭키 : 암호화, 복호화 키가 동일 => 키 교환 중 탈취 문제 발생
  - 공개키 : 공개키는 모든 사람이 접근 가능 => 각 사용자가 개인키 사용해 복호화

![image](https://github.com/bjsystems/rnd/assets/121341413/74e22497-a0f5-48af-981d-1fa95293489e)

<br>

- 상호인증 : 클라이언트와 서버간의 상호 인증 (인증기관 : CA )
  - Certificate Authority : 암호화에 사용하는 키를 담은 인증서를 발급하고 관리
<br>

**💡 송수신 과정**

- Handshake : 데이터를 주고 받기 전, 서버의 무결성(인증서)을 확인하고 대칭키를 전달하는 과정
<br>

![image](https://github.com/bjsystems/rnd/assets/121341413/9fb17a1d-1727-427d-8a52-e2433da4fd63)

 1. 사이트는 자신의 정보와 공개키를 인증기관(CA)에 제출
 
 2. CA는 검증 후, 사이트 정보와 공개키를 CA의 개인키로 암호화 -> 사이트 인증서 생성
 
 3. CA는 웹브라우저에게 자신의 공개키를, 사이트에게는 암호화한 인증서 제공
 
 4. 사용자가 웹브라우저 통해 사이트 접속 시  사이트는 자신의 인증서를 웹브라우저에게 보낸다.
 (인증서에는 CA의 개인키로 암호화한 사이트의 정보와 공개키가 들어있음 / 서버로부터 session ID 받음)
 
 5. 웹브라우저는 CA의 공개키로 서버 인증서를 해독하고 검증
 
 6. 얻은 사이트 공개키로 대칭키를 암호화하여 전송
 
 7. 사이트는 자신의 개인키로 복호화하여 대칭키 획득
 
 8. 이후 대칭키(세션키)를 통해 암호문 주고 받음

- 세션키 : handshake가 완료된 이후에 통신 양측에서 사용하는 대칭키
- first handshake 이후에는 더 이상 공개키 / 개인키 사용 X  =>  서로 다른 세션 키로 통신
- 한 세션 타임이 끝날 때까지 적용되는 임시키 (대화 마다 다른 세션키가 적용된다.)
<br>

![image](https://github.com/bjsystems/rnd/assets/121341413/8491576c-3de9-466f-bb6c-345403212782)
![image](https://github.com/bjsystems/rnd/assets/121341413/49ecac29-2ba1-4c48-b283-0f8b6fa2e57f)




