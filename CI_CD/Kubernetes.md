## 쿠버네티스(Kubernetes)란?

- 컨테이너를 오케스트레이션 하는 도구

- 컨테이너화된 애플리케이션 환경(Containerized Application)을 탄력적으로 실행

- k8s라는 약자로 불리는데, 이는 k,s 사이의 8글자를 나타내는 약식 표기

- 단순한 컨테이너 플랫폼이 아닌 마이크로서비스, 클라우드 네이티브 플랫폼(CNCF) 을 지향
![image](https://github.com/yejun95/Today-I-Learn/assets/121341413/91e79789-fbab-4b5a-b3e8-e115c4a6dbe4)

<br>

**용어 정리**
- 컨테이너: 앱이 구동되는 환경까지 감싸서 실행할 수 있도록 하는 격리 기술
- 컨테이너 런타임: 컨테이너를 다루는 도구 (ex. 도커)
- 오케스트레이션: 여러 서버에 걸친 컨테이너 및 사용하는 환경 설정을 관리하는 행위
<br>
<hr>
<br>

### ✔ 등장 배경
- 도커의 등장으로 컨테이너 기반 배포 방식이 활성화

- 도커 이미지가 많아져 관리할 컨테이너, 서버 수의 증가
<br>

>**"컨테이너 어느 서버에 배포하지? 리소스 남는 서버 있나? 확인 확인🤦‍♀️"**<br>
>**"엇! 이 컨테이너 죽었네ㅜㅜ 다시 살려줘.**
<br>

- 할일이 많아지면 이런 잡스러운 일들을 자동화

- 컨테이너들의 관리를 자동화할 도구(컨테이너 오케스트레이션 툴) 의 필요성이 대두

- 2015년 7월, 쿠버네티스가 첫 출시

- 다양한 컨테이너 오케스트레이션이 있음에도 쿠버네티스가 사실상 표준으로 자리 매김한 이유
  - 대규모 컨테이너를 관리했던 구글의 노하우와 강력한 확장성
  - 마이크로소프트, RedHat, IBM 등 수많은 기업의 참여
  - AWS, GCP, Zure, Digital Ocean, IBM Cloud, Oracle Cloud 등에서 관리형 서비스를 내놓음으로써 클라우드 컨테이너 시장을 평정
<br>
<hr>
<br>

### ✔ 쿠버네티스의 역할
**자동화된 복구(self-healing)**
- 컨테이너를 모니터링 하면서 컨테이너가 죽는 즉시 쿠버네티스는 그것을 빠르게 재시작시킨다.
<br>

**로드 밸런싱(Load balancing)**
- 서비스 웹사이트의 니즈에 따라 컨테이너의 숫자를 자동으로 조절한다.

- 접속하는 유저가 많을수록 쿠버네티스는 구동하는 컨테이너의 숫자를 늘리고, 유저가 적어지면 컨테이너의 숫자를 줄인다.
<br>

**무중단(Fault tolerance-FT) 서비스**
- 점진적 업데이트를 통해 서비스를 중단하지 않고도 서비스 업데이트를 가능하게 한다.
<br>

**호환성(Vendor Lock In 해결)**
- 서로 다른 클라우드 사이의 호환 문제를 해결하여 사용자들이 특정 업체에 종속되는 일 없이 환경을 이전할 수 있도록 해준다.

![image](https://github.com/yejun95/Today-I-Learn/assets/121341413/70504e15-2ed7-48a8-95f2-392d860c92d3)
<br>
<hr>
<br>

### ✔ Docker vs Kubernetes
- Docker : 컨테이너 런타임의 종류로, 컨테이너를 다루는 일을 한다.

- Kubernetes : 컨테이너 오케스트레이션 툴의 한 종류로 다수의 컨테이너 실행을 관리 및 조율하는 역할을 한다.

- 즉 한 개의 컨테이너를 구동시킬 때는 **도커**를 이용하지만,<br>
다수의 컨테이너를 구동하여 환경을 관리 및 조율할 필요가 있을 때에는 **쿠버네티스**를 이용한다고 생각하면 된다.

![image](https://github.com/yejun95/Today-I-Learn/assets/121341413/95ead1b3-ae4f-44d8-866d-b7c39fc2e38d)
<br>
<hr>
<br>

### ✔ 애플리케이션 배포 환경 변천사
![image](https://github.com/yejun95/Today-I-Learn/assets/121341413/5ddc0cf8-0389-4e25-be51-2a77d9cc21c6)

- 쿠버네티스를 검색하다 보면 위와 같은 사진이 나온다.
  - 전통적 배포(Traditional Deployment)
  - 가상화 배포(Virtualized Deployment)
  - 컨테이너 중심 배포(Container Deployment)
<br>

**전통적 배포(Traditional Deployment)**
- 오래 전부터 쓰이던 방식으로 컴퓨터 한대에 하나의 OS를 설치하고 여러가지 프로그램을 구동하는 전통적인 방식

- 여러 프로그램 설치 시 성능 저하 발생
  - ex) 집 PC가 많은 리소스를 갖게 되면 성능이 저하되는 걸 볼 수 있다.

- 반대로 하드웨어 성능이 뛰어나 서버 리소스가 남아 도는 경우가 존재
  - "대의 컴퓨터를 여러대의 컴퓨터처럼 사용할 수는 없을까?" 라는 의문점 발생

- 이러한 문제를 해결하기 위해 나온 배포 방식이 가상화 배포(Virtualized Deployment) 방식이다.

![image](https://github.com/yejun95/Today-I-Learn/assets/121341413/285cc01d-2a04-40e9-9608-37debf32d0bd)

<br>

**가상화 배포(Virtualized Deployment)**
- 전통적 배포 방식과 같이 하나의 컴퓨터에 하나의 OS를 설치하는 것까지는 동일

- 가상 머신(Virtual Machine)이라는 새로운 개념이 등장

- Hypervisor : 하나의 시스템 상에서 가상 컴퓨터를 여러 개 구동할 수 있도록 해 주는 중간 계층을 의미
  - 가상머신 각각에 자원 할당

- App : 실행하고자 하는 프로그램

- Bin/Library : 프로그램이 실행하는데 필요한 환경과 관련된 파일

- 물리적으로 한개의 컴퓨터를 사용하지만, 가상머신을 이용하면 여러 프로그램을<br>
각각의 가상머신에서 실행시킴으로서 프로그램들이 서로 간섭하는 것을 방지

- 가상머신은 각각 CPU, 메모리, 저장 장치 등을 개별적으로 할당할 수 있으므로<br>
좀 더 무거운 프로그램에는 더 높은 사양을 할당할 수 있다.

- 전통적 배포 방식보다는 분명 효율적이지만, 가상머신은 완전한 컴퓨터이고<br>
가상머신에 일일이 운영체제를 설치해야 하기 때문에 컨테이너 중심의 배포(Container Deployment)보다는 무거운 편
<br>

**컨테이너 중심 배포(Container Deployment)**
- 컨테이너와 VM의 가장 큰 차이점은, 컨테이너는 애플리케이션 간에 운영체제(OS)를 공유한다는 점입니다.

-  ‘하이퍼바이저’라는 부분이 ‘컨테이너 런타임’으로 대체되고, ‘가상머신’ 부분은 ‘컨테이너’로 대체된다.

- OS를 매번 설치할 필요가 없이 하나의 host OS만 사용

- 한 컨테이너에서 일어나는 문제는 다른 컨테이너에서 구동되는 프로그램에 아무런 영향을 주지 않는다.
  - host OS를 공유하더라도 의존성없이 독립적인 실행이 가능하다.

![image](https://github.com/yejun95/Today-I-Learn/assets/121341413/ff92aafa-d6b0-4e4f-acc0-2ec789a4b9a7)
<br>
<hr>
<br>

**Reference**<br>

[kt cloud Blog : 쿠버네티스, 이것만 알면 된다! - #1 쿠버네티스란 무엇일까?](https://tech.ktcloud.com/67)<br>
[yunulog : 쿠버네티스는 무엇일까? (도커와 쿠버네티스의 차이)](https://velog.io/@yunuchoiii/%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4%EB%8A%94-%EB%AC%B4%EC%97%87%EC%9D%BC%EA%B9%8C-%EB%8F%84%EC%BB%A4%EC%99%80-%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4%EC%9D%98-%EC%B0%A8%EC%9D%B4)<br>
[Dragony.log : [K8s] 쿠버네티스란 무엇인가?](https://velog.io/@holicme7/K8s-%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80)
